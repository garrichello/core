<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<!DOCTYPE task SYSTEM "ctdl.dtd">
<task uid='Task1' owner='Owner1' description='' root_path='/opt/gcoret/' data_module_path=''>
    <service processingClass='' calculationParameter='' trend='' isBaseLayer=''><!-- GUI service params -->
      <timePeriod uid="Input_1" type=''>
        <dateStart year='' month='' day=''/>
        <dateEnd year='' month='' day=''/>
      </timePeriod>
      <timePeriod uid="Input_2" type=''>
        <dateStart year='' month='' day=''/>
        <dateEnd year='' month='' day=''/>
      </timePeriod>
    </service>
    <metadb host='localhost' name='cvcdatadb' user='dbuser' password=''/>
    <computing system="calculator" type="LOCAL" ip="127.0.0.1"/>
<!-- Data segment. Order is not important. -->

    
    <data uid='Data_1' type='dataset'> <!-- type: dataset, array -->
    	<description title='ERA Interim 075 reanalysis' name='Temperature' units='K'/>
	    <dataset name='ERAInt' resolution='0.75x0.75' time_step='6h' scenario='-'/>  <!-- ERAINT -->
    	<variable name='t2m' tempk2c='no'/> <!-- TMP, air, 2T, TAV, precip-->
	    <region units='degrees' lon0='0'>
	        <point lon='60' lat='70'/>
	        <point lon='90' lat='70'/>
	        <point lon='90' lat='50'/>
	        <point lon='60' lat='50'/>
	    </region>
	    <levels values='2m'/>
	    <time uid='Input_1' template='YYYYMMDDHH'>
	        <segment name='Seg1' beginning='1979010100' ending='1979013118'/>
	    </time>
    </data>  
    
    <data uid='Data_2' type='dataset'> <!-- type: dataset, array -->
    	<description title="APHRODITE's Water Resources Project" name='Daily precipitation' units='mm/day'/>
	    <dataset name='APHRODITE' resolution='0.25x0.25' time_step="1d" scenario='-'/>  <!-- ERAINT -->
    	<variable name='precip' tempk2c='no'/> <!-- TMP, air, 2T, TAV, precip-->
	    <region units='degrees' lon0='0'>
	        <point lon='60' lat='70'/>
	        <point lon='90' lat='70'/>
	        <point lon='90' lat='50'/>
	        <point lon='60' lat='50'/>
	    </region>
	    <levels values='sfc'/>
	    <time uid='Input_2' template='YYYYMMDDHH'>
	        <segment name='Seg1' beginning='1981070100' ending='1981073118'/>
	    </time>
    </data>
    
    <destination uid='Image_1' type='image'> <!-- type: 'image', 'raw' -->
	    <file name='output/output_CalcCorrelation_R.tiff' type='geotiff'/> <!-- type for graphics kind='shape': 'eps', 'geotiff'; kind='contour'/'station': 'eps', 'shape'; for kind=='multiline': 'eps'; for kind=='tile' : 'geotiff24' -->
	    <projection name='cylindrical'> <!-- 'azimuthal equidistant, 'cylindrical',... -->
	        <limits units='degrees'>
          	    <limit role="left">-180</limit>
	            <limit role="right">180</limit>
          	    <limit role="top">90</limit>
          	    <limit role="bottom">-90</limit>                                        
	        </limits>
	    </projection>
	    <graphics title='Correlation coefficient' kind='shaded'> <!-- kind: 'shaded', 'contour', 'station', 'tile'; 'multiline', 'vector', 'regress2d' -->
    	    <width units='pixels'>3072</width>
	        <height units='pixels'>2304</height>
	        <legend title='Correlation coefficient' kind='file' type='continuous' position='none'> <!-- kind: 'embedded', 'file', 'none'; position: 'right', 'left', 'top', 'bottom' (only for kind=='embedded') -->
		        <units></units> <!-- added after legend's title -->
    	    	<nlabels>11</nlabels> <!-- !!! number of labels in legend -->
	    	    <ncolors>10</ncolors> <!-- number of discrete colors in legend -->		
    	    	<limited>no</limited> <!-- fixed legend limits: yes/no -->
	    	    <minimum>-15.0</minimum> <!-- ignored if limited == no -->
    		    <maximum>15.0</maximum> <!-- ignored if limited == no -->
        		<file name='output/output_CalcCorrelation_R.sld' type='xml'/> <!-- file for legend (if legend kind=='file'), type: 'tiff', 'png', 'jpeg', 'gif', 'bmp', 'ppm, 'srf'  -->
	        </legend>
	        <colortable>RAINBOW</colortable>  <!-- only for graphics kind=='shaded' -->
	        <colorscale>linear</colorscale> <!-- only for graphics kind=='shaded' -->
	        <smoothing>yes</smoothing> <!-- only for graphics kind=='shaded' -->
            <steps>30</steps> <!-- only for graphics kind == 'contour' or for file type == 'shape' -->
	    </graphics>
    </destination>
    
    <destination uid='Image_2' type='image'> <!-- type: 'image', 'raw' -->
	    <file name='output/output_CalcCorrelation_sig.tiff' type='geotiff'/> <!-- type for graphics kind='shape': 'eps', 'geotiff'; kind='contour'/'station': 'eps', 'shape'; for kind=='multiline': 'eps'; for kind=='tile' : 'geotiff24' -->
	    <projection name='cylindrical'> <!-- 'azimuthal equidistant, 'cylindrical',... -->
	        <limits units='degrees'>
          	    <limit role="left">-180</limit>
    	        <limit role="right">180</limit>
              	<limit role="top">90</limit>
              	<limit role="bottom">-90</limit>                                        
    	    </limits>
	    </projection>
    	<graphics title='Significance of Correlation coefficient' kind='shaded'> <!-- kind: 'shaded', 'contour', 'station', 'tile'; 'multiline', 'vector', 'regress2d' -->
    	    <width units='pixels'>3072</width>
	        <height units='pixels'>2304</height>
	        <legend title='Significance of Correlation coefficient' kind='file' type='continuous' position='none'> <!-- kind: 'embedded', 'file', 'none'; position: 'right', 'left', 'top', 'bottom' (only for kind=='embedded') -->
        		<units></units> <!-- added after legend's title -->
	        	<nlabels>2</nlabels> <!-- !!! number of labels in legend -->
		        <ncolors>2</ncolors> <!-- number of discrete colors in legend -->		
    		    <limited>no</limited> <!-- fixed legend limits: yes/no -->
    	    	<minimum>-15.0</minimum> <!-- ignored if limited == no -->
	    	    <maximum>15.0</maximum> <!-- ignored if limited == no -->
        		<file name='output/output_CalcCorrelation_sig.sld' type='xml'/> <!-- file for legend (if legend kind=='file'), type: 'tiff', 'png', 'jpeg', 'gif', 'bmp', 'ppm, 'srf'  -->
	        </legend>
    	    <colortable>gist_yarg</colortable>  <!-- only for graphics kind=='shaded' -->
	        <colorscale>linear</colorscale> <!-- only for graphics kind=='shaded' -->
	        <smoothing>yes</smoothing> <!-- only for graphics kind=='shaded' -->
            <steps>30</steps> <!-- only for graphics kind == 'contour' or for file type == 'shape' -->
	    </graphics>
    </destination>

    <destination uid='File_1' type='raw'>
	    <file name='output/output_CalcCorrelation_R.nc' type='netcdf'/> <!--type: 'netcdf', 'geotiff'; 'bin', xml' -->
    </destination> 
    
    <destination uid='File_2' type='raw'>
	    <file name='output/output_CalcCorrelation_sig.nc' type='netcdf'/> <!--type: 'netcdf', 'geotiff'; 'bin', xml' -->
    </destination> 
    
    <data uid='Result_1' type='array'>
    	<description title='Dataset 1' name='DS1' units='-'/>
    </data>
    
    <data uid='Result_2' type='array'>
    	<description title='Dataset 2' name='DS2' units='-'/>
    </data>
    
    <data uid='Result_3' type='array'>
        <description title='Correlation coefficient' name='Correlation coefficient' units=''/>
    </data>
    
    <data uid='Result_4' type='array'>
        <description title='Significance of Correlation coefficient' name='Significance' units=''/>
    </data>
              
<!-- End of data segment -->

<!-- Code segment. Order is IMPORTANT! -->

    <processing uid='Process_1' class='CalcUnifyGrids' module_path=''>
    	<input uid='P1Input1' data='Data_1'/> 
    	<input uid='P1Input2' data='Data_2'/>
    	<output uid='P1Output1' data='Result_1'/>
    	<output uid='P1Output2' data='Result_2'/>
    </processing>
    
    <processing uid='Process_2' class='CalcCorrelation' module_path=''>
	    <input uid='P2Input1' data='Result_1'/>
        <input uid='P2Input2' data='Result_2'/>
        <output uid='P2Output1' data='Result_3'/>
        <output uid='P2Output2' data='Result_4'/>
    </processing>
    
    <processing uid='Visualization_1' class='cvcOutput'>
	    <input uid='V1Input1' data='Result_3'/>
	    <output uid='V1Destination' data='Image_1'/>
    </processing> 
    
    <processing uid='Visualization_2' class='cvcOutput'>
	    <input uid='V2Input1' data='Result_4'/>
	    <output uid='V2Destination' data='Image_2'/>
    </processing> 
    
    <processing uid="Output_1" class="cvcOutput">
    	<input uid="O1Data1" data="Result_3"/>
        <output uid="O1Destination" data="File_1"/>
    </processing>
    
    <processing uid="Output_2" class="cvcOutput">
	    <input uid="O2Data1" data="Result_4"/>
        <output uid="O2Destination" data="File_2"/>
    </processing> 


<!-- End of code segment -->

</task>
